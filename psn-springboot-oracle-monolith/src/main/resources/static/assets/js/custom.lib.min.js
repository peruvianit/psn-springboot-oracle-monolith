/*
 * @preserve
 * Filename: functions.lib.js
 *
 * Created: 06/10/2016 (09:58:58)
 * Created by: Lorenzo Saibal Forti <lorenzo.forti@gmail.com>
 *
 * Last update: 06/10/2016 (09:58:58)
 * Updated by: Lorenzo Saibal Forti <lorenzo.forti@gmail.com>
 *
 * Copyleft: 2020 - Tutti i diritti riservati
 *
 * Comments: questo file contiene, in maggioranza, le funzioni di gestione layout del template generico. vengono incluse anche alcune funzioni generiche utili a tutti i siti (ad esempio funzioni di log o popup)
 */
"use strict";var defParams={"layoutMenuVersion":"v","isMultiLanguage":"y","showBackTop":"y","closeMenuOnclick":"y","validateFormByClass":"n","dropdownAnimation":"y","amountScrolled":500,"eBackTop":"#back-to-top","eMainContainer":"#main-container","eMainPageContent":"#main-page-content","eHeader":"#header","eFooter":"#footer","eOverLay":"#overlay","eNavMobile":"#nav-mobile","eMenuH":"#menu-h","eMenuContainerH":"#main-menu-container-h","eFixedHead":"#fixed-bar","eFixedBarWrapper":"#fixed-bar-wrapper","eTopNavWrapper":"#top-nav-wrapper","eHeaderWrapper":"#header-wrapper","eSidebarContainer":"#sidebar-container","eSidebarMenu":"#sidebar-menu","eSidebar":"#sidebar","eJsTableSaw":"#js-table-saw","eUploadTitle":"#uploaded-title","eLoader":"#loader","eWinBackCont":"#winback","eJsActionConfirm":".js-action-confirm","eJsDisableAction":".js-disable-action","eSidebarMenuClass":".side-menu","eTableSaw":".tablesaw","eDateIt":".dateit","eRemoveOnSubmit":".js-remove-onsubmit","eJsSubmitOutForm":".js-submit-out-form","eSortableBtn":".tablesaw-sortable-btn","eSortableSelect":".tablesaw-btn-select","eJsMenu":".jsmenu","eInputBgFrame":".inputbg-frame","ePrintLink":".printlink","eLinkExternal":".external","eTareaCountChars":".count-chars","eCharsLeft":".chars-left","eSelectDynamic":".sel-dynamic","eSelectHasChild":".sel-haschild","eGroupFormCont":".form-group","eReadOnly":".input666","ePageContent":".page-content","ePageHeader":".page-header","eLangLongList":".lang-longlist","eOpenThis":".openthis","eSelectPicker":".selectpicker","eDropDown":".dropdown","eFixedMenuHWrapper":".fixed-menu-h-wrapper","eCollapse":".collapse","eCheckBoxAll":".checkbox-all","eCheckBoxAllDisable":".checkbox-all-disable","eFixElement":".fixit","eCloseit":".closeit","ePassShow":".show-password","eShowPolicy":".show-policy","eOnlyUserMenu":".onlyuser-menu","eDropDownMenu":".dropdown-menu","eIsChainselHide":".is-chainsel-hide","eMultiLevelMenu":".multilevel-menu","eLevelMenu2":".menu-level-2","eTopLinksWrapper":".desktop-usermenu-wrapper","eSwitchIcon":".switchicon","eMultiLineEllipsis":".multi-line-ellipsis","eSwitchInputToggle":".switch-input-toggle","eSwitchDataOnlyDisab":".switch-input-onlydisable","eModal":".modal","eModalHeader":".modal-header","eModalBody":".modal-body","eModalDownload":".modal-download","eTruncate":".truncate","eSameHeight":".same-height","eSecondsRedir":".seconds-redir","eLeaveDisabled":".leave-disabled","ePopover":".popover","eChainSelGroup":"chainsel-group","eIsChildData":"childid","isIeOld":"is-ieold","multiLevelMenuIn":"in","menuActiveClass":"active","lastChild":"last-child","switchDataInput":"switch-input","switchInputActive":"switch-input-active","disableOnLoad":"disable-onload","cloneMenuDataSource":"desktop-usermenu","cloneMenuDataTarget":"fixed-bar-wrapper","cloneMenuDataTarget2":"mobile-usermenu-h","cloneMenuDataTarget3":"mobile-usermenu-v","darkOverlay":"dark-overlay","hidePolicyOnKeyDown":"hide-policy-on-keydown","hideBtnOnly":"js-hide-btn-only","switchIconEven":"switchicon-even","switchIconOdd":"switchicon-odd","selectDynamic":"sel-dynamic","selectHasChild":"sel-haschild","limitCharsEllipsis":0,"funcTimeOut":2e4,"dialogCloseTime":3e3,"isDebug":!1},opt=$.extend(!0,{},defParams);!function(e){e.fn.toLog=function(e,o){var t=void 0!==o&&""!==o;opt.isDebug&&(t?alert(e):window.console&&window.console.log&&window.console.log(e))},e.fn.isMobile=function(){var e=!1;return/iPhone|iPod|iPad|Android|BlackBerry|webOS/i.test(navigator.userAgent)&&(e=!0),e},e.fn.checkLocalStorage=function(o){if("undefined"==typeof Storage)return void 0!==o&&e.fn.showDialog({"title":"Attenzione","bodyMsg":"Funzione localstorage non supportata","typecast":"info","type":"info"}),e.fn.toLog("funzione localstorage non supportata"),!1},e.fn.showPopover=function(o,t){var a=void 0!==o?o:"",n=void 0!==t?t:"popover";if(a.whiteListTag){var i=e.fn.tooltip.Constructor.DEFAULTS.whiteList,l=a.whiteListTag,s=Object.keys(l);e(s).each((function(e){i[s[e]]=l[s[e]]}))}e("[data-toggle='"+n+"']").popover(a),void 0!==a.btnclose&&a.btnclose&&e("[data-toggle='"+n+"']").on("shown.bs.popover",(function(){e(opt.eCloseit).on("click",(function(){e(this).closest(opt.ePopover).popover("hide")}))})),e("[data-toggle='"+n+"']").on("shown.bs.popover",(function(){"function"==typeof a.callbackShown&&a.callbackShown.call(this)})),e("body").on("hidden.bs.popover",(function(o){e(o.target).data("bs.popover").inState.click=!1}))},e.fn.pageAnchor=function(o){var t=e("html,body"),a=e.extend(!0,{},{"anchorLink":"","anchorChar":"#","offset":0,"callbackFunc":""},o);if(""!==a.anchorLink){if("#"!==a.anchorChar&&window.location.href.indexOf(a.anchorChar)>-1){var n=window.location.hash.replace(a.anchorChar,"#");e(n).length&&setTimeout((function(){t.animate({"scrollTop":e(n).offset().top+parseInt(a.offset)},"slow")}),300)}e(a.anchorLink).click((function(o){o.preventDefault();var n,i=e(this),l=i.attr("href"),s=i.data("history-title");e(l).length&&(n="#"!==a.anchorChar?l.replace("#",a.anchorChar):l,t.animate({"scrollTop":e(l).offset().top+parseInt(a.offset)},"slow"),window.history.pushState("",s,n))})),"function"==typeof a.callbackFunc&&a.callbackFunc.call(this)}},e.fn.historyBack=function(){e(opt.eWinBackCont).click((function(){if(""!==document.referrer)history.back();else{var e=location.href.split("?");window.location.href=e[0].substring(0,e[0].lastIndexOf("/")+1)}}))},e.fn.newTabLinks=function(){e(opt.eLinkExternal).click((function(){return window.open(e(this).attr("href")),!1}))},e.fn.autoRedirect=function(){e("a[data-autoredirect]").on("redir-now",(function(){var o=e(this),t=o.data("autoredirect");e(opt.eSecondsRedir).html(t),setTimeout((function(){window.location=o.attr("href")}),1e3*t)})).trigger("redir-now")},e.fn.urlParam=function(e){var o=new RegExp("[?&]"+e+"=([^&#]*)").exec(window.location.href);return null===o?null:o[1]||0},e.fn.hamburgerStatus=function(){var o="none"!==e(opt.eNavMobile).css("display");e("body").data("hamburgerStatus",o)},e.fn.toggleSwitchIcon=function(o){void 0!==o&&e(o).toggleClass(e(o).data(opt.switchIconEven)).toggleClass(e(o).data(opt.switchIconOdd))},e.fn.slideAnimantion=function(e,o){"y"===opt.dropdownAnimation&&"bs.dropdown"===o.namespace&&("show"===o.type&&e.find(opt.eDropDownMenu).stop(!0,!0).slideDown(),"hide"===o.type&&e.find(opt.eDropDownMenu).stop(!0,!0).slideUp())},e.fn.manageMenuH=function(){var o={},t=e("body");return e(opt.eMenuH).scrollTop(0),o.open=function(){e(opt.eMenuContainerH).css("min-height",e(opt.eMainPageContent).height()),e(opt.eMenuContainerH).css("display","block"),t.css("overflow","hidden"),e.fn.toLog("aperto")},o.close=function(){e(opt.eMenuContainerH).css("min-height","auto"),t.css("overflow","auto"),e("body").data("hamburgerStatus")?(e(opt.eMenuContainerH).css("display","none"),e.fn.toLog("menu mobile chiuso onclick")):(e(opt.eMenuContainerH).css("display","block"),e.fn.toLog("menu mobile aperto per desktop"))},o},e.fn.manageMenuV=function(){var o,t={};return t.open=function(){e(window).scrollTop(0),e(opt.eSidebarContainer).css("display","block"),e(opt.eFooter).addClass("hidden"),0===e(opt.eOverLay).length&&e(opt.eMainContainer).before(e.parseHTML('<div id="overlay"></div>')),e(opt.eOverLay).addClass(opt.darkOverlay),o=e(opt.eMainPageContent).innerHeight()>e("body").data("sizeViewport")?e(opt.eMainPageContent).innerHeight():e("body").data("sizeViewport"),e(opt.eOverLay).css("min-height",o),e(opt.eSidebarContainer).css("min-height",o),e.fn.toLog("aperto")},t.close=function(){e("body").data("hamburgerStatus")?(e(opt.eSidebarContainer).css("display","none"),e.fn.toLog("menu mobile chiuso onclick")):(e(opt.eSidebarContainer).css("display","block"),e.fn.toLog("menu mobile aperto per desktop")),e(opt.eOverLay).removeClass("dark-overlay"),e(opt.eFooter).removeClass("hidden")},t},e.fn.manageHamburger=function(){var o,t;switch("h"===opt.layoutMenuVersion||"u"===opt.layoutMenuVersion?(o=new e.fn.manageMenuH,t=opt.cloneMenuDataTarget2):(o=new e.fn.manageMenuV,t=opt.cloneMenuDataTarget3),e("body").data("hamburgerStatus")&&e(this).length&&e(opt.eNavMobile).toggleClass("open"),e(opt.eNavMobile).hasClass("open")){case!0:e("body").data("hamburgerStatus")?("y"===opt.closeMenuOnclick&&e("body").one("click",opt.eOverLay,(function(){e.fn.manageHamburger.call(e(this))})),o.open(),e.fn.domCloneIt({"cloneSource":opt.cloneMenuDataSource,"cloneDest":t,"cloneContainer":"n","callbackFunc":function(){"u"===opt.layoutMenuVersion&&(e(opt.eOnlyUserMenu+" "+opt.eDropDownMenu).height()>=e(window).height()-150?e(opt.eOnlyUserMenu+" "+opt.eDropDownMenu).css("margin-bottom",e(opt.eOnlyUserMenu+" "+opt.eDropDownMenu).height()):e(opt.eOnlyUserMenu+" "+opt.eDropDownMenu).css("margin-bottom","0"));var o=e("[data-clone-target='"+t+"']");"open"===o.data("clone-status")&&setTimeout((function(){o.addClass("open"),"y"===opt.dropdownAnimation&&o.find(opt.eDropDownMenu).first().stop(!0,!0).slideDown()}))}})):(e(opt.eNavMobile).removeClass("open"),e.fn.manageHamburger(),e.fn.toLog("menu mobile chiuso auto"));break;case!1:default:o.close()}},e.fn.closeDropDown=function(o){e(o).hasClass("open")&&(e(o).removeClass("open"),"y"===opt.dropdownAnimation&&e(o).find(e(opt.eDropDown+" "+opt.eDropDownMenu)).first().hide(),e.fn.toLog("chiudo menu utente"))},e.fn.checkLayout=function(){e.fn.hamburgerStatus();var o=e(opt.ePageHeader).innerHeight(),t=e(opt.eFooter).innerHeight(),a=e(window).height()-(o+t),n=e(window).height()-o;switch(e("body").data("sizeViewport",n),opt.layoutMenuVersion){case"v":e(opt.eMenuContainerH).css("display","none"),e(opt.eNavMobile).css("visibility","visible");break;case"h":default:case"u":e(opt.eSidebarContainer).css("display","none"),e(opt.eNavMobile).css("visibility","visible")}e("body").innerHeight()<=e(window).height()&&e(opt.ePageContent).css("min-height",a),!1===e("body").data("hamburgerStatus")&&!0===e("html").hasClass("is-ie8")&&e(opt.ePageContent).css("height","100%")},e.fn.resizeSidebar=function(){setTimeout((function(){e(opt.eSidebarContainer).height()-80>=e(opt.ePageContent).height()?e(opt.ePageContent).css("min-height",e(opt.eSidebarContainer).height()):(e(opt.eSidebarContainer).css("min-height",e(opt.ePageContent).height()+80),e(opt.ePageContent).css("min-height",e(opt.eSidebarContainer).height()))}),150)},e.fn.domCloneIt=function(o){var t,a=e.extend(!0,{},{"cloneSource":"","cloneDest":"","cloneType":"appendTo","cloneContainer":"y","callOnce":"","callprevFunc":"","callbackFunc":""},o);if(""!==a.cloneSource&&""!==a.cloneDest){if("function"==typeof a.callprevFunc&&a.callprevFunc.call(this),void 0===e("body").data(a.cloneSource+"_"+a.cloneDest)){t="n"===a.cloneContainer?e("[data-clone-source="+a.cloneSource+"]:first").contents():e("[data-clone-source="+a.cloneSource+"]:first");var n=e("[data-clone-target="+a.cloneDest+"]");t.clone().removeAttr("data-clone-source")[a.cloneType](n).promise().done((function(){e("body").data(a.cloneSource+"_"+a.cloneDest,!0),e.fn.toLog(a.cloneSource+": oggetto clonato")})),"function"==typeof a.callOnce&&a.callOnce.call(this)}"function"==typeof a.callbackFunc&&a.callbackFunc.call(this)}},e.fn.fixbarShowHide=function(){e(window).on("scroll resize load",(function(){!1===e("body").data("hamburgerStatus")?e(window).scrollTop()>=e(opt.eFixedHead).data("offset")?"none"===e(opt.eFixedHead).css("display")&&(e.fn.closeDropDown(opt.eTopNavWrapper+" "+opt.eTopLinksWrapper),e.fn.domCloneIt({"cloneSource":opt.cloneMenuDataSource,"cloneDest":opt.cloneMenuDataTarget,"callbackFunc":function(){"y"===opt.dropdownAnimation&&void 0===e(opt.eFixedHead).data(opt.cloneMenuDataSource+"_"+opt.cloneMenuDataTarget)&&e(opt.eFixedBarWrapper+" "+opt.eDropDown).on("show.bs.dropdown hide.bs.dropdown",(function(o){e.fn.slideAnimantion(e(this),o)})).promise().done((function(){e(opt.eFixedHead).data(opt.cloneMenuDataSource+"_"+opt.cloneMenuDataTarget,!0)}))}}),e(opt.eFixedHead).fadeIn(100,(function(){e(opt.eFixedHead).show()})),e.fn.toLog("menu mobile non visibile. attivo la fixbar")):"none"!==e(opt.eFixedHead).css("display")&&e(opt.eFixedHead).hide().promise().done((function(){e.fn.closeDropDown(opt.eFixedBarWrapper+" "+opt.eTopLinksWrapper)})):(e(opt.eFixedHead).hide(),e(window).off("scroll",opt.eFixedHead),e.fn.toLog("menu mobile visibile"))}))},e.fn.showDialog=function(o){var t=e.extend(!0,{},{"typecast":"show","type":"info","title":"","bodyMsg":"","buttonLabel":"Chiudi","btnCancelLabel":"Annulla","btnOKLabel":"Conferma","cssClass":"","autoClose":!1,"draggable":!1,"closable":!0,"customZindex":1102,"showCallback":"","shownCallback":"","hideCallback":"","hiddenCallback":"","callbackFunc":""},o),a={"info":BootstrapDialog.TYPE_INFO,"primary":BootstrapDialog.TYPE_PRIMARY,"success":BootstrapDialog.TYPE_SUCCESS,"warning":BootstrapDialog.TYPE_WARNING,"danger":BootstrapDialog.TYPE_DANGER,"normal":BootstrapDialog.TYPE_DEFAULT};switch(t.typecast){case"alert":case"info":BootstrapDialog.alert({"title":t.title,"message":t.bodyMsg,"type":a[t.type],"cssClass":t.cssClass,"closable":t.closable,"draggable":t.draggable,"buttonLabel":t.buttonLabel,"callback":function(e){"function"==typeof t.callbackFunc&&t.callbackFunc.call(this,e)}});break;case"confirm":BootstrapDialog.configDefaultOptions({"cssClass":t.cssClass}),BootstrapDialog.confirm({"title":t.title,"message":t.bodyMsg,"type":a[t.type],"closable":t.closable,"draggable":t.draggable,"btnCancelLabel":t.btnCancelLabel,"btnOKLabel":t.btnOKLabel,"callback":function(e){"function"==typeof t.callbackFunc&&t.callbackFunc.call(this,e)}});break;case"show":default:BootstrapDialog.show({"title":t.title,"message":t.bodyMsg,"type":a[t.type],"cssClass":t.cssClass,"closable":t.closable,"draggable":t.draggable,"buttonLabel":t.buttonLabel,"onshow":function(e){!0===t.autoClose&&setTimeout((function(){e.close()}),opt.dialogCloseTime),"function"==typeof t.showCallback&&t.showCallback.call(this,e)},"onshown":function(o){""!==t.customZindex&&e(o)[0].$modal.css("z-index",t.customZindex),"function"==typeof t.shownCallback&&t.shownCallback.call(this,o)},"onhide":function(e){"function"==typeof t.hideCallback&&t.hideCallback.call(this,e)},"onhidden":function(e){"function"==typeof t.hiddenCallback&&t.hiddenCallback.call(this,e)}})}},e.fn.confirmActionLink=function(){e(opt.eJsActionConfirm).on("click",(function(o){var t=e(this),a=void 0!==t.data("modal-title")?t.data("modal-title"):"",n=void 0!==t.data("modal-bodymsg")?t.data("modal-bodymsg"):"",i=void 0!==t.data("modal-type")?t.data("modal-type"):"info";o.preventDefault(),e.fn.showDialog({"typecast":"confirm","type":i,"title":a,"bodyMsg":n,"callbackFunc":function(e){e&&(window.location.href=t.attr("href"))}})}))},e.fn.disableAction=function(o){var t=e.extend(!0,{},{"parent":"","overlayZindex":"","waitText":"","showLoader":!1},o);e(opt.eJsDisableAction).on("click",(function(){var o=e(this),a=e("body");""!=t.parent&&(a=o.parent(t.parent)),""!=t.waitText&&o.text(t.waitText),a.css("position","relative").promise().done((function(){a.append('<div class="'+validationParams.disableOverlay+'"></div>'),""!=t.overlayZindex&&e("."+validationParams.disableOverlay).css("z-index",t.overlayZindex),t.showLoader&&e("body").append('<div id="loader">Attendere...<div class="cssload-loader"><span></span></div></div>')}))}))},e.fn.autoCloseDialog=function(o){var t=e.extend(!0,{},{"idModal":"","timeOut":1e3,"callbackFunc":""},o);""!==t.idModal&&setTimeout((function(){e(t.idModal).modal("hide")}),t.timeOut)},e.fn.toggleLoader=function(o){switch(void 0===o?"show":o){case"show":e(opt.eLoader).removeClass("invisible");break;case"hide":default:e(opt.eLoader).addClass("invisible")}},e.fn.datePicker=function(o){var t={"format":"dd/mm/yyyy","language":"it","clearBtn":!0,"autoclose":!0,"disableTouchKeyboard":!0},a=t,n=opt.eDateIt;void 0!==o&&(a=e.extend(!0,{},t,o)),void 0!==a.selector&&(n=a.selector),e(n).datepicker(a).on("show",(function(){var o=e(this);o.keydown((function(){return!1})),o.on("cut copy paste",(function(e){e.preventDefault()}))}))},e.fn.datePickerDestroy=function(){e(opt.eDateIt).datepicker("destroy")},e.fn.ulToSelect=function(o){if("none"===e(o).css("display")){var t="select-"+o.slice(1);if(0===e("."+t).length){var a=e("<select />").addClass(t),n=[];e.each(e(o).children("li"),(function(){var o=e(this).children("a").hasClass("active")?'selected="selected"':"";n.push('<option data-link-url="'+e(this).find("a").attr("href")+'" '+o+">"+e(this).text()+"</option>")})),e(a).html(n.join("")).insertAfter(e(o)),e.fn.selectLocation("."+t,"lang")}}},e.fn.selectLocation=function(o,t){var a,n=void 0===t?"":t;e(o).change((function(){var o=e(this),t=e("option:selected",o).attr("value"),i=e("option:selected",o).data("link-url"),l={};if(a=void 0!==i?i:window.location.href,void 0===t)return window.location.href=a,!1;a.replace(/[?&]+([^=&]+)=([^&]*)/gi,(function(e,o,t){o!==n&&(l[o]=t)}));var s,r=a.indexOf("?")>0&&Object.keys(l).length>0?"&":"",c=a.split("?"),d=e.param(l);return s=""!==n?n+"="+t:t,window.location.href=c[0]+"?"+d+r+s,!1}))},e.fn.linkBackTop=function(){e(window).scroll((function(){e(window).scrollTop()>opt.amountScrolled?(e(opt.eBackTop).fadeIn("slow"),e(opt.eBackTop).css("bottom","54px")):e(opt.eBackTop).fadeOut("slow")})),e(opt.eBackTop).click((function(){return e("html, body").animate({"scrollTop":0},700),!1}))},e.fn.errorBoxCallback=function(){"v"===opt.layoutMenuVersion&&e.fn.resizeSidebar()}}(jQuery),$(document).ready((function(){$.fn.checkLayout(),$.fn.fixbarShowHide(),"y"===opt.isMultiLanguage&&$.fn.ulToSelect(opt.eLangLongList),"y"===opt.showBackTop&&$.fn.linkBackTop(),"n"!==opt.layoutMenuVersion&&($(opt.eNavMobile).click((function(){$.fn.manageHamburger.call($(this))})),$(opt.eSidebarMenu+" "+opt.eOpenThis+","+opt.eSidebarMenuClass+" "+opt.eOpenThis).each((function(){$(this).parents(opt.eMultiLevelMenu).addBack().addClass(opt.multiLevelMenuIn);var e=$(this).parents().children("a").find(opt.eSwitchIcon);$.fn.toggleSwitchIcon(e),$(opt.ePageContent).css("min-height",$(opt.eSidebarContainer).innerHeight())})),$("[data-toggle='collapse']").click((function(e){var o=$(this);e.preventDefault(),o.parent().children().find(".multilevel-menu").collapse("hide")})),$(opt.ePrintLink).click((function(e){e.preventDefault(),window.print()})),$(opt.eDropDown+","+opt.eCollapse).on("show.bs.dropdown hide.bs.dropdown show.bs.collapse hide.bs.collapse shown.bs.collapse hidden.bs.collapse",(function(e){var o,t=$(this);t.is(e.target)&&("bs.dropdown"===e.namespace?o=t.find(opt.eSwitchIcon):"bs.collapse"===e.namespace&&(o=t.prev().find(opt.eSwitchIcon+":first")),"show"!==e.type&&"hide"!==e.type||"bs.collapse"!==e.namespace&&"bs.dropdown"!==e.namespace||($.fn.toggleSwitchIcon(o),$.fn.slideAnimantion(t,e)),"shown"!==e.type&&"hidden"!==e.type||"bs.collapse"!==e.namespace||("hidden"===e.type&&$(opt.eFooter).hide(),!1===$("body").data("hamburgerStatus")?$.fn.resizeSidebar():$(opt.ePageContent).css("min-height",$("body").data("sizeViewport")),!1===$(opt.eFooter).is(":visible")&&$(opt.eFooter).fadeIn(100)))})),$(window).on("resize",(function(){$.fn.fixbarShowHide(),$.fn.checkLayout(),"n"!==opt.layoutMenuVersion&&$.fn.manageHamburger(),"y"===opt.isMultiLanguage&&$.fn.ulToSelect(opt.eLangLongList)})),$(window).on("load",(function(){$.fn.resizeSidebar()})))}));
/*
 * @preserve
 * Filename: custom.lib.js
 *
 * Created: 02/09/2019 (16:43:24)
 * Created by: Lorenzo Saibal Forti <lorenzo.forti@gmail.com>
 *
 * Last Updated: 02/09/2019 (16:43:24)
 * Updated by: Lorenzo Saibal Forti <lorenzo.forti@gmail.com>
 *
 * Copyleft: 2019 - Tutti i diritti riservati
 *
 * Comments:
 */
opt=$.extend(defParams,{"validateFormByClass":"y","eGroupFormCont":".sel-dynamic-group"});var c_defParams={"eJsLoadTmpl":"#js-load-tmpl","eJsReceiversResult":"#js-receivers-result","eJsSearchModalForm":"#js-search-modal-form","eJsSearchResultForm":"#js-search-result-form","eJsSearchModalResult":"#js-search-result","eJsName":"#js-name","eJsSurname":"#js-surname","eJsFc":"#js-fc","eJsSearchReviewer":"#js-search-reviewer","eJsModalStartTitle":".js-modal-start-title","eJsModalBtnInsert":".js-submit-modal-btn-insert","eJsTextEditor":".js-text-editor","eJsActionConfirm":".js-action-confirm","eInputDateRange":".input-daterange","eJsResetitRange":".js-resetit-range","eJsDynamicType":".js-dynamic-type","eJsToggleReset":".js-toggle-reset","tmplResult":"tmpl-result"},c_opt=$.extend(!0,{},c_defParams);!function(e){e.fn.drawSvgPie=function(o,t,a,n,i){var l,s={"textFont":"titilliumweb-r","marginTop":25,"marginRight":0,"marginBottom":15,"marginLeft":0,"donut":!0,"donutWidth":40,"labelsSticks":!1,"colors":["#f7bf7c","#f98586","#cc97ca","#1ac4a4","#b07a3e","#9455c4","#2f82c8"]},r=e.extend(!0,{},s,a),c={},d=e("#"+o),p=void 0!==t?t:[0],u=void 0!==i&&""!==i&&i,f=void 0!==n&&""!==n?n:"";return"y"===(void 0!==a.explode?a.explode:"y")&&(s=e.extend(!0,{},s,{"exploded":p.length})),c.init=function(){l=!1!==u&&e(window).width()<u&&""!==f?e.extend(!0,{},r,f):e.extend(!0,{},s,r);var t=new RGraph.SVG.Pie({"id":o,"data":p,"options":l}).draw();e.data(d,o,t)},c.resize=function(){var t=e.data(d,o);RGraph.SVG.clear(t.svg),t.svg.setAttribute("width",d.parent().width()),c.init(o,p,a)},e("#"+o).length&&(c.init(),e(window).on("resize",(function(){c.resize()}))),c},e.fn.actionConfirm=function(){e(c_opt.eJsActionConfirm).on("click",(function(o){var t=e(this),a=void 0!==t.data("modal-titlemsg")?t.data("modal-titlemsg"):"Conferma",n=void 0!==t.data("modal-bodymsg")?t.data("modal-bodymsg"):"",i=void 0!==t.data("modal-type")?t.data("modal-type"):"danger";o.preventDefault(),e.fn.showDialog({"typecast":"confirm","type":i,"cssClass":"custom-confirm-delete-modal modal-plus-margin","title":a,"bodyMsg":n,"callbackFunc":function(e){e&&(window.location.href=t.attr("href"))}})}))},e.fn.setEditor=function(){return SUNEDITOR.create(e(c_opt.eJsTextEditor)[0],{"buttonList":[["undo","redo"],["bold","italic","underline","strike"],["link"],["removeFormat"]],"width":"100%","minHeight":"7rem","resizingBar":!1})},e.fn.asyncLoadData=function(o){var t={defaultParams:{"urlLoadData":"","refreshTableSaw":"true"}};t.params=e.extend(!0,{},t.defaultParams,o),t.loadCheck=function(e){var o=t.params[e];if(!o||""===o)throw"Non è stato impostato un parametro valido per "+e},t.init=function(){t.loadCheck("urlLoadData"),e.ajax({"url":t.params.urlLoadData,"cache":!1,"timeout":opt.funcTimeOut,"dataType":"json","beforeSend":function(){e.fn.toggleLoader("show")}}).done((function(o){o?e(c_opt.eJsReceiversResult).html(tmpl(c_opt.tmplResult,o)).promise().then((function(){"true"===t.params.refreshTableSaw&&e(opt.eJsTableSaw).tablesaw().data("tablesaw").refresh()})):e.fn.showDialog({"type":"danger","title":"Errore!","bodyMsg":"Si &egrave; verificato un errore nell'elaborazione dei dati","buttonLabel":"Chiudi","showCallback":function(){e(c_opt.eJsLoadTmpl).modal("hide")}})})).fail((function(){e.fn.showDialog({"type":"danger","title":"Errore!","bodyMsg":"Si &egrave; verificato un errore nell'elaborazione dei dati!","buttonLabel":"Chiudi","showCallback":function(){e(c_opt.eJsLoadTmpl).modal("hide")}})})),e.fn.toggleLoader("hide")},t.init()},e.fn.cleanSearchModalCommon=function(){e(opt.eModal+" "+opt.eModalBody).animate({"scrollTop":"0"},400),e(c_opt.eJsModalBtnInsert+","+c_opt.eJsModalStartTitle).addClass("hidden").prop("disabled",!0)},e.fn.cleanSearchModalLoad=function(){e(c_opt.eJsSearchModalResult).addClass("hidden").removeData("modal-tmpl-data"),e(c_opt.eJsModalStartTitle).removeClass("hidden"),e("input"+c_opt.eJsToggleReset+":text, select"+c_opt.eJsToggleReset).val("")},e.fn.searchModalReviewer=function(o){var t={defaultParams:{"urlLoadData":""}};t.params=e.extend(!0,{},t.defaultParams,o),t.loadCheck=function(e){var o=t.params[e];if(!o||""===o)throw"Non è stato impostato un parametro valido per "+e},t.init=function(){e(c_opt.eJsSearchModalForm).on("submit",(function(o){o.preventDefault(),t.loadCheck("urlLoadData");var a=e(this);e.fn.cleanSearchModalCommon(),e.ajax({"url":t.params.urlLoadData,"type":"POST","cache":!1,"timeout":opt.funcTimeOut,"dataType":"json","data":e(c_opt.eJsSearchModalForm).serialize(),"beforeSend":function(){e.fn.toggleLoader("show"),e.fn.toggleTemporarySubmit(a)}}).done((function(o){o?(e(c_opt.eJsSearchModalResult).html(tmpl("tmpl-result",o)).promise().done((function(){e(c_opt.eJsSearchModalResult).removeClass("hidden");var o=e(opt.eModal+" "+opt.eModalBody),t=e(opt.eModal+" "+opt.eModalBody+" "+c_opt.eJsSearchModalResult);e(opt.eModal+" "+opt.eModalBody).animate({"scrollTop":t.offset().top-o.offset().top+o.scrollTop()-50},800).promise().done((function(){e.fn.toggleTemporarySubmit(a,"show")}))})),e("input:radio").on("click",(function(){e(c_opt.eJsSearchModalResult).data("modal-tmpl-data",JSON.stringify(o[e(this).attr("data-index")])),e(c_opt.eJsModalBtnInsert).removeClass("hidden").prop("disabled",!1)}))):e.fn.showDialog({"type":"danger","title":"Errore!","bodyMsg":"Si &egrave; verificato un errore nell'elaborazione dei dati","buttonLabel":"Chiudi","showCallback":function(){e(c_opt.eJsSearchReviewer).modal("hide")}})})).fail((function(){e.fn.showDialog({"type":"danger","title":"Errore!","bodyMsg":"Si &egrave; verificato un errore nell'elaborazione dei dati!","buttonLabel":"Chiudi","showCallback":function(){e(c_opt.eJsSearchReviewer).modal("hide")}})})),e.fn.toggleLoader("hide")}))},t.init()},e.fn.insertReviewerFromList=function(){e(c_opt.eJsSearchResultForm).on("submit",(function(o){o.preventDefault(),e(c_opt.eJsModalBtnInsert).prop("disabled",!0);var t=JSON.parse(e(c_opt.eJsSearchModalResult).data("modal-tmpl-data"));void 0!==t&&""!==t?(e(c_opt.eJsName).val(t.name),e(c_opt.eJsSurname).val(t.surname),e(c_opt.eJsFc).val(t.fc)):e.fn.showDialog({"type":"danger","title":"Errore!","bodyMsg":"Si &egrave; verificato un errore nell'elaborazione dei dati","buttonLabel":"Chiudi"}),e(c_opt.eJsSearchReviewer).modal("hide")}))}}(jQuery),$(document).ready((function(){}));